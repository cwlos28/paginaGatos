<!DOCTYPE html>
<html lang="es" data-bs-theme="auto">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Financiero</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">

  <!-- Bootstrap y fuentes -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- ChartJS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>

<!-- Navbar m칩vil -->
<nav class="navbar navbar-light bg-light d-md-none px-3">
  <button class="btn btn-outline-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
    <i class="bi bi-list"></i>
  </button>
  <span class="navbar-brand mb-0 h5">Dashboard</span>
</nav>

<!-- Men칰 lateral m칩vil -->
<div class="offcanvas offcanvas-start d-md-none" tabindex="-1" id="mobileSidebar">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Men칰</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <a href="#" class="d-block mb-2 active"><i class="bi bi-house"></i> Inicio</a>
    <a href="#" class="d-block mb-2"><i class="bi bi-credit-card"></i> Gastos</a>
    <a href="#" class="d-block mb-2"><i class="bi bi-wallet2"></i> Ingresos</a>
    <a href="#" class="d-block mb-2"><i class="bi bi-tags"></i> Categor칤as</a>
    <a href="#" class="d-block mb-2"><i class="bi bi-bookmark"></i> Etiquetas</a>
    <a href="#" class="d-block mb-2"><i class="bi bi-clipboard-check"></i> Presupuestos</a>
    <a href="#" class="d-block text-danger mt-3"><i class="bi bi-box-arrow-right"></i> Cerrar sesi칩n</a>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar escritorio -->
    <aside class="col-md-2 d-none d-md-block sidebar">
      <h5 class="text-center text-primary fw-bold mb-4">
        <i class="bi bi-bar-chart-fill"></i> Dashboard
      </h5>
      <a href="{{ url_for('dashboard') }}" class="active"><i class="bi bi-house"></i> Inicio</a>
      <a href="{{ url_for('listar_gastos') }}"><i class="bi bi-credit-card"></i> Gastos</a>
      <a href="{{ url_for('listar_ingresos') }}"><i class="bi bi-wallet2"></i> Ingresos</a>
      <a href="{{ url_for('listar_categorias') }}"><i class="bi bi-tags"></i> Categor칤as</a>
      <a href="{{ url_for('listar_etiquetas') }}"><i class="bi bi-bookmark"></i> Etiquetas</a>
      <a href="{{ url_for('listar_presupuestos') }}"><i class="bi bi-clipboard-check"></i> Presupuestos</a>
      <a href="{{ url_for('logout') }}" class="text-danger mt-3 d-block"><i class="bi bi-box-arrow-right"></i> Cerrar sesi칩n</a>
    </aside>

    <!-- Contenido principal -->
    <main class="col-md-10 px-4 py-4">
      <div class="dashboard-header mb-3 d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
        <h2 class="fw-bold mb-3 mb-md-0">游늵 Resumen Financiero</h2>
        <button id="colorMode" class="btn btn-glow-mode btn-sm">
          <i class="bi bi-circle-half me-1"></i> Modo
        </button>
      </div>

      <!-- Filtro fechas -->
      <form id="filtroFechas" class="row g-3 align-items-end mb-4">
        <div class="col-sm-6 col-md-auto">
          <label for="fechaInicio" class="form-label">Desde</label>
          <input type="date" id="fechaInicio" name="inicio" class="form-control" required>
        </div>
        <div class="col-sm-6 col-md-auto">
          <label for="fechaFin" class="form-label">Hasta</label>
          <input type="date" id="fechaFin" name="fin" class="form-control" required>
        </div>
        <div class="col-md-auto">
          <button type="submit" class="btn btn-primary">Filtrar</button>
        </div>
      </form>

      <!-- Totales -->
      <div class="row g-3 mb-4">
        <div class="col-12 col-md-4">
          <div class="summary-box">
            <h6>Ingresos Totales</h6>
            <p id="ingresosTotal">$0.00</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="summary-box">
            <h6>Gastos Totales</h6>
            <p id="gastosTotal">$0.00</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="summary-box">
            <h6>Presupuesto Asignado</h6>
            <p id="presupuestoTotal">$0.00</p>
          </div>
        </div>
      </div>

      <!-- 칔ltimos movimientos -->
      <div class="row g-3 mb-4">
        <div class="col-12 col-md-4">
          <div class="summary-box border-start-success">
            <h6>칔ltimo Ingreso</h6>
            <p id="ultimoIngreso">-</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="summary-box border-start-success">
            <h6>칔ltimo Gasto</h6>
            <p id="ultimoGasto">-</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="summary-box border-start-success">
            <h6>칔ltimo Presupuesto</h6>
            <p id="ultimoPresupuesto">-</p>
          </div>
        </div>
      </div>

      <!-- Gr치ficos -->
      <div class="row g-4">
        <div class="col-12 col-lg-6">
          <div class="chart-card">
            <h6 class="fw-semibold mb-3"><i class="bi bi-bar-chart"></i> Ingresos vs Gastos</h6>
            <canvas id="barChart" height="220"></canvas>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="chart-card">
            <h6 class="fw-semibold mb-3"><i class="bi bi-pie-chart"></i> Gastos por Categor칤a</h6>
            <canvas id="donutChart" height="220"></canvas>
          </div>
        </div>
        <div class="col-12">
          <div class="chart-card">
            <h6 class="fw-semibold mb-3"><i class="bi bi-bar-chart-line"></i> Presupuesto vs Gasto por Categor칤a</h6>
            <canvas id="budgetChart" height="180"></canvas>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- Script del dashboard -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

</body>
</html>
